<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>Software Engineering Notebook</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Software Engineering Notebook</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_fault_tolerance_patterns">Fault Tolerance Patterns</a>
<ul class="sectlevel2">
<li><a href="#_circuit_breaker">Circuit Breaker</a></li>
<li><a href="#_rate_limiter">Rate Limiter</a></li>
<li><a href="#_retry">Retry</a></li>
<li><a href="#_timeout">Timeout</a></li>
<li><a href="#_references">References</a></li>
<li><a href="#_useful_libraries">Useful Libraries</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Essays and research on topics in software engineering.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fault_tolerance_patterns">Fault Tolerance Patterns</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section consists of essays and examples pertaining to fault tolerance patterns.</p>
</div>
<div class="sect2">
<h3 id="_circuit_breaker">Circuit Breaker</h3>
<div class="paragraph">
<p>A fault-tolerance primitive that sheds load from struggling subsystems.</p>
</div>
<div class="paragraph">
<p>A circuit breaker is a tool to shed load from struggling subsystems, decrease latency of requests by failing fast, introduce subsystem monitoring, and give operations teams granular control over system interactions <a href="#Fowler">[1]</a><a href="#Netflix">[2]</a>.</p>
</div>
<div class="paragraph">
<p>A circuit breaker is essentially a protective sleeve around a function call. Clients make requests to the breaker instead of to the protected function, and then the breaker selectively chooses to forward those requests on to the protected function. If the function becomes unresponsive or erroneous, the breaker may "trip" and refuse to forward subsequent requests.</p>
</div>
<div class="paragraph">
<p>In this way a breaker can reduce load on strained subsystems accessed by its protected call. This not only gives the strained subsystem an opportunity to recover <a href="#Fowler">[1]</a><a href="#Netflix">[2]</a>, it also prevents the client from potentially dedicating resources to a slow subsystem <a href="#Fowler">[1]</a><a href="#Netflix">[2]</a>, allowing those resources to be used for productive work. The client of a tripped breaker may furthermore fall back on secondary measures (e.g cached data or default values); while not ideal, this ensures end-users receive usable data within an acceptable window of time <a href="#Netflix">[2]</a>.</p>
</div>
<div class="paragraph">
<p>A circuit breaker may generate logs, alerts, or other diagnostics when it is tripped, informing operators of possible system degradation, and may even expose an interface to operators which allows them to manually toggle the breaker between states for troubleshooting <a href="#Fowler">[1]</a>.</p>
</div>
<div class="sect3">
<h4 id="_examples">Examples</h4>
<div class="paragraph">
<p>The following examples demonstrate operation of a circuit breaker.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="examples/circuit-breaker/general/example.html">General Usage</a></p>
</li>
<li>
<p><a href="examples/circuit-breaker/operations-api/example.html">Operations API</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rate_limiter">Rate Limiter</h3>
<div class="paragraph">
<p>A fault-tolerance primitive that prevents clients of a system from exceeding a sustainable request rate.</p>
</div>
<div class="paragraph">
<p>Rate-limiters exist to protect services from unsustainable request volumes, such as during spikes in user traffic or denial-of-service attacks (including friendly-fire from misbehaving collaborator services) <a href="#google-cloud">[3]</a><a href="#stripe">[4]</a>. While services can utilize rate-limiting to protect themselves from high request volume, they can also use rate-limiting to control the volume of their own requests to unprotected legacy back-ends that are otherwise vulnerable <a href="#google-cloud">[3]</a>. In either case, rate-limiters deny requests above a certain throughput, shedding load off vulnerable systems, and may even prioritize certain types of requests over others to ensure less-significant systems degrade before more-critical systems <a href="#stripe">[4]</a>.</p>
</div>
<div class="paragraph">
<p>Clients of rate-limited systems should respond to rate-limiting intelligently or else risk <a href="https://landing.google.com/sre/sre-book/chapters/addressing-cascading-failures/">cascading failures</a> as errors from one service propagate uncontrolled throughout a network of collaborating services, possibly with self-reinforcing consequences <a href="#google-cloud">[3]</a>. In order for clients to respond to rate-limiting, services must signal clients when rate-limiting is active, such as by returning error code <a href="https://httpstatuses.com/429">429: Too Many Requests</a> <a href="#getambassador">[5]</a> during periods of high load. Clients will typically want to <a href="#_retry">retry</a>. As an alternative to rejecting excessive requests, services may be able to enqueue them for asynchronous fulfillment. In this scenario a service would immediately return a job ID to the client in response to their request. The client would know to poll the service or subscribe to an appropriate messaging channel for the response <a href="#resilience4j-ratelimiter">[6]</a><a href="#google-cloud">[3]</a>.</p>
</div>
<div class="paragraph">
<p>Rate-limiting strategies which discard traffic in exceeds of an allowed rate (e.g. with 429 http responses) are referred to as <em>traffic policing</em> strategies, and strategies which instead defer requests until they conform to a tolerable request rate (e.g. by enqueuing requests for asynchronous fulfillment) are referred to as <em>traffic shaping</em> strategies <a href="#rfc-2475">[7]</a><a href="#wikipedia-traffic-policing">[8]</a>.</p>
</div>
<div class="paragraph">
<p>There are multiple algorithms for rate-limiting (see <a href="#google-cloud">[3]</a><a href="#wikipedia-ratelimiting">[9]</a>), some of which we will explore below.</p>
</div>
<div class="sect3">
<h4 id="_token_bucket_leaky_bucket_algorithm">Token Bucket (Leaky Bucket) Algorithm</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There are two implementations of the leaky bucket: one used to police traffic, and one used to shape it. The traffic-shaping version is conceptually the same as token bucket, described below. These amount to different mental models for the same algorithm. <a href="#wikipedia-token-bucket">[10]</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The token bucket algorithm is used to police or shape traffic to conform to a desired level of "burstiness" and average request rate <a href="#science-direct">[11]</a><a href="#wikipedia-token-bucket">[10]</a>. This strategy limits each request by the resources (e.g. database connections, CPU time) it requires such that overall traffic is limited on the basis of available system capacity rather than simple volume of requests <a href="#google-cloud">[3]</a>.</p>
</div>
<div class="paragraph">
<p>The algorithm is based on the analogy of a bucket filled with tokens. Requesters must retrieve some number of tokens from the bucket based on the capacity they wish to utilize. If the bucket has enough tokens, the requester removes the tokens and computes a response. If the bucket has too few tokens, the request is rejected or enqueued for later computation depending on implementation. At a fixed rate, tokens are added back to the bucket, but any excess tokens beyond the bucket&#8217;s capacity are simply discarded <a href="#google-cloud">[3]</a><a href="#cisco-token-bucket">[12]</a><a href="#wikipedia-token-bucket">[10]</a>. The capacity of the bucket therefore determines the maximum instantaneous capacity that may be utilized by requests, and the rate at which tokens are added governs the long-term average utilization <a href="#cisco-token-bucket">[12]</a><a href="#wikipedia-token-bucket">[10]</a><a href="#science-direct">[11]</a>.</p>
</div>
<div class="paragraph">
<p>In telecommunications contexts, token buckets are often used to limit the average rate at which bits flow into a network with limited bandwidth <a href="#cisco-token-bucket">[12]</a><a href="#wikipedia-token-bucket">[10]</a><a href="#science-direct">[11]</a>. The literature describes such a token bucket algorithm with the equation <code>CIR = CBS / T</code> <a href="#science-direct">[11]</a>, where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CIR</code>, the <em>committed information rate</em> or <em>mean rate</em>, is the average rate at which bits are forwarded to the network;</p>
</li>
<li>
<p><code>CBS</code>, the <em>committed burst size</em>, is the maximum volume of bits submitted simultaneously during the time period <code>T</code>; and</p>
</li>
<li>
<p><code>T</code> is the maximum duration of a burst during which the network is fully utilized.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The capacity of a token bucket is represented by <code>CBS</code>; clients of the bucket can never request more than <code>CBS</code> tokens at a single time. Tokens are returned to the bucket at the rate <code>CIR</code>, which by definition means all <code>CBS</code> tokens are replenished every interval <code>T</code>. Therefore in the worst case, clients can request at most <code>CBS</code> tokens every interval <code>T</code>, which over the long-term conforms to the desired average request rate <code>CIR</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_examples_2">Examples</h4>
<div class="paragraph">
<p>See the following examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="examples/rate-limiter/general/example.html">General behavior</a></p>
</li>
<li>
<p><a href="examples/rate-limiter/token-bucket/example.html">Token buckets</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_retry">Retry</h3>
<div class="paragraph">
<p>A <em>Retry</em> is a fault tolerance mechanism to help clients make successful requests despite interference from transient faults.</p>
</div>
<div class="paragraph">
<p>Retries help clients carry out requests against remote services even when short-lived, "transient" faults might otherwise prevent them from doing so <a href="#amazon">[13]</a>. These faults, like "the momentary loss of network connectivity to components and services, the temporary unavailability of a service, or timeouts that occur when a service is busy," frequently go away on their own <a href="#azure-patterns-retry">[14]</a>. If clients re-attempt requests that fail due to these faults, they are therefore likely to eventually succeed <a href="#azure-patterns-retry">[14]</a>. As a consequence, retry mechanisms improve a client&#8217;s odds of successfully communicating with a service at the cost of issuing additional requests, which comes with a number of special considerations, outlined below.</p>
</div>
<div class="sect3">
<h4 id="_design_considerations">Design Considerations</h4>
<div class="sect4">
<h5 id="_increased_and_synchronized_traffic">Increased and Synchronized Traffic</h5>
<div class="paragraph">
<p>Because retry mechanisms send more traffic to services in response to faults, they can place additional strain on already struggling services and hamper recovery <a href="#amazon">[13]</a><a href="#azure-patterns-retry">[14]</a>.</p>
</div>
<div class="paragraph">
<p>Retry traffic load is managed using <em>backoff</em>, a delay between client retry attempts. These delays help to distribute client retry traffic over time, lessening the risk of overloading a service <a href="#azure-patterns-retry">[14]</a>. However, retry-with-backoff can generate <a href="https://en.wikipedia.org/wiki/Thundering_herd_problem">thundering herds</a> when many clients synchronize their retry schedule. The resulting waves of traffic can exacerbate service degradation and cause additional faults <a href="#amazon">[13]</a><a href="#google">[15]</a>.</p>
</div>
<div class="paragraph">
<p>These problematic spikes of traffic are smoothed out into more uniform request patterns by further introducing <em>jitter</em>, or randomization, to the retry logic <a href="#amazon">[13]</a><a href="#amazon-2">[21]</a>. As demonstrated in <a href="#amazon-2">[21]</a>, randomization prevents clients from synchronizing, producing a uniform rate of request instead.</p>
</div>
<div class="paragraph">
<p>Even when backoff and jitter are designed into a retry mechanism, the resulting retry traffic may nonetheless exacerbate service providers when they enter a degraded state. Consider instrumenting at-risk services with <a href="#_circuit_breaker">circuit breakers</a> <a href="#amazon">[13]</a><a href="#azure">[16]</a> or <a href="#_rate_limiter">rate limiters</a> <a href="#amazon">[13]</a> to manage this risk.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>(TODO) Because backoff distributes request load over time into a near-uniform rate of request, it plays a very similar role to the <a href="#_rate_limiter">rate limiter</a>, which enforces a constant request rate from clients by shedding excess requests. At time of writing, I do not have references which indicate how the two differ.</p>
</div>
<div class="paragraph">
<p>It may be that rate limiters in the literature are assumed to enforce <em>static</em> rates. Suppose a service with a static rate limiter becomes degraded for some unforseen reason (e.g. database queries are suddenly slow), and that causes the rate at which it can sustainably service requests to drop below the enforced rate. This causes the service to attempt to service more traffic than it can; essentially, the static rate limit no longer reflects the actual capacity of the system, allowing it to further degrade. Retry-with-backoff is <em>dynamic</em> in that the client varies its request rate over time in response to actual service capacity. Therefore retry-with-backoff may serve as a second layer of defence when static rate limiters fail.</p>
</div>
<div class="paragraph">
<p>Put another way, rate limiters shed load to <em>prevent</em> service degradation, whereas retries-with-backoff slow down in response to observed service load so that services can <em>recover</em>.</p>
</div>
<div class="paragraph">
<p>See Netflix&#8217;s discussion of <a href="https://medium.com/@NetflixTechBlog/performance-under-load-3e6fa9a60581">adaptive concurrency limits</a>.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_kinds_of_backoff">Kinds of Backoff</h6>
<div class="paragraph">
<p>Retries can be made immediately or after a possibly growing delay. While <a href="#amazon-2">[21]</a> considers exponential backoff to be a good standard, it and many other sources do not identify the properties of different backoff protocols or when best to use them. The choice is ostensibly significant, however, since backoff clearly impacts service load, perceived availability, and perceived responsiveness. For example, the Twitter API instructs developers to use no backoff, linear backoff, and exponential backoff on a case-by-case basis <a href="#twitter">[20]</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Once an established connection drops, attempt to reconnect immediately. If the reconnect fails, slow down your reconnect attempts according to the type of error experienced:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Back off linearly for TCP/IP level network errors. These problems are generally temporary and tend to clear quickly. Increase the delay in reconnects by 250ms each attempt, up to 16 seconds.</p>
</li>
<li>
<p>Back off exponentially for HTTP errors for which reconnecting would be appropriate. Start with a 5 second wait, doubling each attempt, up to 320 seconds.</p>
</li>
<li>
<p>Back off exponentially for HTTP 429 errors <code>Rate limit exceeded</code>. Start with a 1 minute wait and double each attempt. Note that every HTTP 429 received increases the time you must wait until rate limiting will no longer be in effect for your account.</p>
</li>
</ul>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_client_waiting">Client Waiting</h5>
<div class="paragraph">
<p>Backoff protocols such as <em>exponential backoff</em> grow rapidly and cause clients to wait a long time between requests and overall <a href="#amazon">[13]</a>. Both <a href="#azure">[16]</a> and <a href="#amazon">[13]</a> recommend limiting the maximum delay between requests and the maximum number of retry attempts to avoid undesirable waiting.</p>
</div>
</div>
<div class="sect4">
<h5 id="_idempotence">Idempotence</h5>
<div class="paragraph">
<p>It may not be safe to retry failed requests against an API that causes <a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)">side effects</a>, such as database state changes. A service might successfully create side effects even when a request fails overall; a subsequent attempt could trigger those effects again <a href="#amazon">[13]</a><a href="#azure-patterns-retry">[14]</a>. If repeated side effects are not desirable, design APIs that are <a href="https://en.wikipedia.org/wiki/Idempotence">idempotent</a> instead, and only issue retries to idempotent APIs <a href="#amazon">[13]</a><a href="#azure-patterns-retry">[14]</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Example</div>
<div class="paragraph">
<p>Suppose a client issues a bank API request to increment the value of an account by $100. The service successfully increments the value of the account, but the request fails overall due to an unrelated error (e.g. a network error). The client inappropriately retries the request, and as a result, increments the account by $200 cumulatively, not $100 as intended. Because the bank API is not idempotent, it is not safe to retry failed requests against it.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_compounding_retries">Compounding Retries</h5>
<div class="paragraph">
<p>When multiple services within a request path each use retry, a request to a service early in the path can multiply into a substantial number of requests that place additional strain on the service near the end <a href="#amazon">[13]</a><a href="#azure-patterns-retry">[14]</a>. For example, if the first service makes 3 retries to the second, which makes 3 retires to the third, the result may be as many as 9 requests to the third service. Limit retry logic to only one point in the stack to avoid the issue <a href="#amazon">[13]</a>, or only introduce retry when the consequences of failure are well-understood <a href="#azure-patterns-retry">[14]</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_transient_and_intransient_faults">Transient and Intransient Faults</h5>
<div class="paragraph">
<p>Because a Retry only helps a system recover from transient faults, retries must have selective triggers. Retries should generally not trigger in response to client errors (e.g. HTTP 4xx-series responses) since those are unlikely to ever succeed, but generally should trigger in response to server errors (e.g. HTTP 5xx-series responses) because those may succeed on a subsequent attempt <a href="#amazon">[13]</a>. This is contextual, however; <a href="#azure-patterns-retry">Microsoft</a> notes that internal server errors (e.g. HTTP 500 responses) may be caused by business-logic defects, and these types of failures would not succeed on retried attempts. Retry trigger logic is further complicated in an eventually-consistent environment where otherwise chronic errors may resolve as state propagates throughout a system <a href="#amazon">[13]</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timeout">Timeout</h3>
<div class="paragraph">
<p>A <em>timeout</em> limits the amount of time one process spends waiting on another <a href="#microsoft">[17]</a><a href="#ibm">[18]</a>. When, for example, a web service fails, it may do so without responding to its clients in any way <a href="#microsoft">[17]</a>. A client could wait indefinitely for a response, but by using a timeout, it can instead assume the service has failed <a href="#microsoft">[17]</a> and respond to the error with a <a href="#Fallback">fallback (TODO)</a> behavior <a href="#ibm">[18]</a>. By preempting latent requests and using fallback behavior, a client can stay responsive to its own clients and reallocate resources that would otherwise be dedicated to an unresponsive request <a href="#unc">[19]</a>.</p>
</div>
<div class="paragraph">
<p>Clients that utilize timeouts must be aware timed-out requests may still succeed in the backing service: An operation can both succeed and time-out <a href="#ibm">[18]</a>. For example, suppose a web service experiences unusually high load and becomes latent. Though it still successfully handles all requests, it may fail to do so within the configured timeout of its clients. The clients will receive timeouts even though the service completes requests normally.</p>
</div>
</div>
<div class="sect2">
<h3 id="_references">References</h3>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="Fowler"></a>[1] M. Fowler. "CircuitBreaker." martinFowler.com. <a href="https://www.martinfowler.com/bliki/CircuitBreaker.html" class="bare">https://www.martinfowler.com/bliki/CircuitBreaker.html</a> (accessed June 29, 2020).</p>
</li>
<li>
<p><a id="Netflix"></a>[2] B. Christensen. "Fault tolerance in a high volume, distributed system." The Netflix Tech Blog. <a href="https://netflixtechblog.com/fault-tolerance-in-a-high-volume-distributed-system-91ab4faae74a" class="bare">https://netflixtechblog.com/fault-tolerance-in-a-high-volume-distributed-system-91ab4faae74a</a> (accessed June 29, 2020).</p>
</li>
<li>
<p><a id="google-cloud"></a>[3] "Rate-limiting strategies and techniques." Google Cloud. <a href="https://cloud.google.com/solutions/rate-limiting-strategies-techniques" class="bare">https://cloud.google.com/solutions/rate-limiting-strategies-techniques</a> (accessed Aug. 8, 2020).</p>
</li>
<li>
<p><a id="stripe"></a>[4] P. Tarjan. "Scaling your API with rate limiters." Stripe. <a href="https://stripe.com/blog/rate-limiters" class="bare">https://stripe.com/blog/rate-limiters</a> (accessed Aug. 8, 2020).</p>
</li>
<li>
<p><a id="getambassador"></a>[5] D. Bryant. "Part 2: rate limiting for API gateways." Ambassador. <a href="https://blog.getambassador.io/rate-limiting-for-api-gateways-892310a2da02" class="bare">https://blog.getambassador.io/rate-limiting-for-api-gateways-892310a2da02</a> (accessed Aug. 8, 2020).</p>
</li>
<li>
<p><a id="resilience4j-ratelimiter"></a>[6] "Ratelimiter." Resilience4j. <a href="https://resilience4j.readme.io/docs/ratelimiter" class="bare">https://resilience4j.readme.io/docs/ratelimiter</a> (accessed Aug. 8, 2020).</p>
</li>
<li>
<p><a id="rfc-2475"></a>[7] S. Blake, D. Black, M. Carlson, E. Davies, Z.Wang, W. Weisss. "RFC 2475 - An architecture for differentiated services." IETF Tools. <a href="https://tools.ietf.org/html/rfc2475#section-1.2" class="bare">https://tools.ietf.org/html/rfc2475#section-1.2</a> (accessed Sep. 7, 2020).</p>
</li>
<li>
<p><a id="wikipedia-traffic-policing"></a>[8] "Traffic policing (communications)." Wikipedia. <a href="https://en.wikipedia.org/wiki/Traffic_policing_(communications" class="bare">https://en.wikipedia.org/wiki/Traffic_policing_(communications</a>) (accessed Sep. 7, 2020).</p>
</li>
<li>
<p><a id="wikipedia-ratelimiting"></a>[9] "Rate limiting." Wikipedia. <a href="https://en.wikipedia.org/wiki/Rate_limiting" class="bare">https://en.wikipedia.org/wiki/Rate_limiting</a> (accessed Aug. 8, 2020).</p>
</li>
<li>
<p><a id="wikipedia-token-bucket"></a>[10] "Token bucket." Wikipedia. <a href="https://en.wikipedia.org/wiki/Token_bucket" class="bare">https://en.wikipedia.org/wiki/Token_bucket</a> (accessed Sep. 7, 2020)</p>
</li>
<li>
<p><a id="science-direct"></a>[11] D. Medhi, K. Ramasamy, Network Routing, 2nd ed. Elsevier Inc, 2018, ch. 18.4.2, pp. 626-644. [Online]. Available: <a href="https://www.sciencedirect.com/topics/computer-science/token-bucket" class="bare">https://www.sciencedirect.com/topics/computer-science/token-bucket</a>. Accessed: Sep. 7, 2020.</p>
</li>
<li>
<p><a id="cisco-token-bucket"></a>[12] "Policing and shaping overview." Cisco Networking Software. <a href="https://www.cisco.com/c/en/us/td/docs/ios/qos/configuration/guide/12_2sr/qos_12_2sr_book/polcing_shping_oview.html" class="bare">https://www.cisco.com/c/en/us/td/docs/ios/qos/configuration/guide/12_2sr/qos_12_2sr_book/polcing_shping_oview.html</a> (accessed Sep 7, 2020).</p>
</li>
<li>
<p><a id="amazon"></a>[13] M. Brooker. "Timeouts, retries, and backoff with jitter." Amazon Builder&#8217;s Library. <a href="https://aws.amazon.com/builders-library/timeouts-retries-and-backoff-with-jitter/" class="bare">https://aws.amazon.com/builders-library/timeouts-retries-and-backoff-with-jitter/</a>. (Accessed Nov 11, 2020).</p>
</li>
<li>
<p><a id="azure-patterns-retry"></a>[14] C. Bennage et. al. "Retry pattern." Azure Documentation. <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/retry" class="bare">https://docs.microsoft.com/en-us/azure/architecture/patterns/retry</a>. (Accessed Nov 11, 2020).</p>
</li>
<li>
<p><a id="google"></a>[15] "Rate-limiting strategies and techniques." Google Cloud Solutions. <a href="https://cloud.google.com/solutions/rate-limiting-strategies-techniques" class="bare">https://cloud.google.com/solutions/rate-limiting-strategies-techniques</a>. (Accessed Nov 11, 2020).</p>
</li>
<li>
<p><a id="azure"></a>[16] C. Bennate et. al. "Transient fault handling." Azure Documentation. <a href="https://docs.microsoft.com/en-us/azure/architecture/best-practices/transient-faults" class="bare">https://docs.microsoft.com/en-us/azure/architecture/best-practices/transient-faults</a>. (Accessed Nov 11, 2020).</p>
</li>
<li>
<p><a id="microsoft"></a>[17] L. Lamport, "Using Time Instead of Timeout for Fault-Tolerant Distributed Systems," ACM Transactions on Programming Languages and Systems, Vol. 6, No. 2, pp. 254-280 April 1984. [Online]. <a href="https://www.microsoft.com/en-us/research/uploads/prod/2016/12/using-time-Copy.pdf" class="bare">https://www.microsoft.com/en-us/research/uploads/prod/2016/12/using-time-Copy.pdf</a>. Accessed: Nov 21, 2020.</p>
</li>
<li>
<p><a id="ibm"></a>[18] "Fault tolerance." IBM Cloud Docs. <a href="https://cloud.ibm.com/docs/java?topic=cloud-native-fault-tolerance" class="bare">https://cloud.ibm.com/docs/java?topic=cloud-native-fault-tolerance</a> (Accessed Nov 21, 2020).</p>
</li>
<li>
<p><a id="unc"></a>[19] V. Heorhiadi, S. Rajagopalan, H. Jamjoom, M. Reiter,  V. Sekar, "Gremlin: Systematic Resilience Testing of Microservices." [Online]. <a href="http://www.cs.unc.edu/~victor/papers/gremlin-icdcs.pdf" class="bare">http://www.cs.unc.edu/~victor/papers/gremlin-icdcs.pdf</a>. Accessed: Nov 21, 2020.</p>
</li>
<li>
<p><a id="twitter"></a>[20] "Sampled stream." Twitter developer documentation. <a href="https://developer.twitter.com/en/docs/twitter-api/tweets/sampled-stream/integrate/handling-disconnections" class="bare">https://developer.twitter.com/en/docs/twitter-api/tweets/sampled-stream/integrate/handling-disconnections</a>. (Accessed Jan 12, 2021).</p>
</li>
<li>
<p><a id="amazon-2"></a>[21] M. Brooker. "Exponential Backoff and Jitter." AWS Architecture Blog. <a href="https://aws.amazon.com/blogs/architecture/exponential-backoff-and-jitter/" class="bare">https://aws.amazon.com/blogs/architecture/exponential-backoff-and-jitter/</a>. (Accessed Jan 12, 2021)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_useful_libraries">Useful Libraries</h3>
<div class="ulist">
<ul>
<li>
<p>Resilience4J implements a number of useful fault-tolerance mechanisms like circuit breakers, bulkheads, and retry mechanisms. Resilience4j is inspired by Netflix&#8217;s <a href="https://github.com/Netflix/Hystrix">Hystrix</a> library, which is no longer actively maintained but curates similar configuration-based mechanisms. As stated in the Hystrix README, Netflix is moving away from configuration-heavy strategies employed by Resilience4J and Hystix towards research on <a href="https://medium.com/@NetflixTechBlog/performance-under-load-3e6fa9a60581">adaptive concurrency limits</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-10-12 22:43:43 UTC
</div>
</div>
</body>
</html>